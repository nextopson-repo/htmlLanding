<!-- STYLES -->
<style>
  * {
    box-sizing: border-box;
  }

  html,
  body {
    overflow-x: hidden;
  }
</style>

<!-- HEADER -->
<header class="flex items-center justify-between px-4 sm:px-6 md:px-10 py-4 bg-white fixed top-0 left-0 w-full z-50">
  <!-- Logo -->
  <div class="w-[120px] sm:w-[140px] md:w-[170px] flex items-center">
    <img src="./Images/NextDeal-Logo 1.svg" alt="Logo" class="h-[28px] w-auto hidden md:block" />
    <img src="./Images/NextDealMobile.png" alt="Mobile Logo" class="h-[28px] w-auto block md:hidden" />
  </div>

  <!-- Desktop Navigation -->
  <div class="hidden md:block">
    <nav class="flex space-x-8 text-sm font-medium text-gray-700">
      <a id="nav-home" href="/" class="relative text-[#595959] text-[16px] group outfit">
        Home
        <span class="underline-span absolute left-1/2 -translate-x-1/2 bottom-[-15px] w-full h-[3px] bg-blue-600 rounded-[3px]
        opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none" style="clip-path: polygon(5% 0%, 95% 0%, 100% 100%, 0% 100%);
        box-shadow: 0 -12px 14px rgba(195, 221, 253, 0.9);"></span>
      </a>

      <a id="nav-about" href="/Pages/About.html" class="relative text-[#595959] text-[16px] group outfit">
        About Us
        <span class="underline-span absolute left-1/2 -translate-x-1/2 bottom-[-15px] w-full h-[3px] bg-blue-600 rounded-[3px]
        opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none" style="clip-path: polygon(5% 0%, 95% 0%, 100% 100%, 0% 100%);
        box-shadow: 0 -12px 14px rgba(195, 221, 253, 0.9);"></span>
      </a>

      <a id="nav-services" href="/#Categorie" class="relative text-[#595959] text-[16px] group outfit">
        Services
        <span class="underline-span absolute left-1/2 -translate-x-1/2 bottom-[-15px] w-full h-[3px] bg-blue-600 rounded-[3px]
        opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none" style="clip-path: polygon(5% 0%, 95% 0%, 100% 100%, 0% 100%);
        box-shadow: 0 -12px 14px rgba(195, 221, 253, 0.9);"></span>
      </a>

      <a id="nav-careers" href="/Pages/Careers.html" class="relative text-[#595959] text-[16px] group outfit">
        Careers
        <span class="underline-span absolute left-1/2 -translate-x-1/2 bottom-[-15px] w-full h-[3px] bg-blue-600 rounded-[3px]
        opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none" style="clip-path: polygon(5% 0%, 95% 0%, 100% 100%, 0% 100%);
        box-shadow: 0 -12px 14px rgba(195, 221, 253, 0.9);"></span>
      </a>

      <a id="nav-contact" href="/Pages/Contact.html" class="relative text-[#595959] text-[16px] group outfit">
        Contact Us
        <span class="underline-span absolute left-1/2 -translate-x-1/2 bottom-[-15px] w-full h-[3px] bg-blue-600 rounded-[3px]
        opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none" style="clip-path: polygon(5% 0%, 95% 0%, 100% 100%, 0% 100%);
        box-shadow: 0 -12px 14px rgba(195, 221, 253, 0.9);"></span>
      </a>
    </nav>
  </div>

  <!-- Download Icons -->
  <div id="downloadWrapper" class="downloadWrapper hidden md:flex ml-4 relative mr-3 sm:hidden ">
    <div class="mainBox">
      <div class="androidicon">
        <img class="androidimg" src="/Images/DownloadForAndroid.svg" alt="Download for Android" />
      </div>
      <div class="divider"></div>
      <div class="appleicon">
        <img class="appleimg" src="/Images/DownloadForApple.svg" alt="Download for Apple" />
      </div>
    </div>
    <div class="playStore outfit">Download for</div>
    <div class="appStore outfit">Download on AppStore</div>
  </div>

  <!-- Hamburger -->
  <div class="md:hidden flex items-center">
    <button id="menuToggle" class="text-gray-700 focus:outline-none">
      <img id="menuIcon" src="/Images/menu-11 copy.svg" alt="menu icon" class="h-7 max-w-7" />
    </button>
  </div>
</header>

<!-- MOBILE MENU -->
<div id="mobileMenu" class="md:hidden fixed top-[62px] left-0 w-full h-full bg-white shadow-lg z-40 hidden">
  <nav class="flex flex-col space-y-4 p-6 text-[#595959] text-base font-medium outfit">
    <div class="mt-4 relative group">
      <button id="productToggleMobile"
        class="flex items-center text-gray-600 text-[16px] outfit font-medium gap-1 focus:outline-none">
        Products
        <svg id="arrowIcon" class="w-4 h-4 transform transition-transform duration-200" fill="none"
          stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M9 5l7 7-7 7" />
        </svg>
      </button>
      <div id="productDropdownMobile" class="mt-3 hidden flex-col items-center space-y-3 transition-all duration-300">
        <img src="/Images/Nextopson-product.svg" alt="Nextopson Product" class="w-40 rounded-lg" />
        <img src="/Images/NextCRM-product.svg" alt="NextCRM Product" class="w-40 rounded-lg" />
      </div>
    </div>

    <img src="/Images/Line 4.png" class="w-full" />
    <a id="mobile-nav-home" href="/">Home</a>
    <img src="/Images/Line 4.png" class="w-full" />
    <a id="mobile-nav-about" href="/Pages/About.html">About Us</a>
    <img src="/Images/Line 4.png" class="w-full" />
    <a id="mobile-nav-services" href="/#Categorie">Services</a>
    <img src="/Images/Line 4.png" class="w-full" />
    <a id="mobile-nav-careers" href="/Pages/Careers.html">Careers</a>
    <img src="/Images/Line 4.png" class="w-full" />
    <a id="mobile-nav-contact" href="/Pages/Contact.html">Contact Us</a>
    <img src="/Images/Line 4.png" class="w-full" />

    <div class="mt-8 p-3 bg-white pt-[96px] ">
      <div class="text-[18px] font-semibold leading-tight tracking-wide text-black mb-4">
        Let's start exploring deals
      </div>
      <div class="flex flex-col gap-3">
        <img src="/Images/Frame 286.png" alt="Play Store" class="w-[200px] h-[58px] p-2 rounded-full" />
        <img src="/Images/Frame 287.png" alt="App Store" class="w-[150px] h-[58px] p-2 rounded-full" />
      </div>
    </div>
  </nav>
</div>

<!-- SCRIPT -->
<script>
  // Toggle download tooltips
  const androidIcon = document.querySelector('.androidicon');
  const playStore = document.querySelector('.playStore');
  androidIcon.addEventListener('mouseenter', () => playStore.classList.add('showPlay'));
  androidIcon.addEventListener('mouseleave', () => playStore.classList.remove('showPlay'));

  const appleIcon = document.querySelector('.appleicon');
  const appStore = document.querySelector('.appStore');
  const wrapper = document.querySelector('.downloadWrapper');
  appleIcon.addEventListener('mouseenter', () => wrapper.classList.add('hoverApple'));
  appleIcon.addEventListener('mouseleave', () => wrapper.classList.remove('hoverApple'));

  // Mobile menu toggle
  const menuToggle = document.getElementById('menuToggle');
  const mobileMenu = document.getElementById('mobileMenu');
  const menuIcon = document.getElementById('menuIcon');
  let isOpen = false;
  menuToggle.addEventListener('click', () => {
    isOpen = !isOpen;
    mobileMenu.classList.toggle('hidden');
    menuIcon.src = isOpen ? '/Images/cross.png' : '/Images/menu-11 copy.svg';
  });

  // Product dropdown in mobile menu
  document.addEventListener('DOMContentLoaded', function () {
    const productToggleMobile = document.getElementById('productToggleMobile');
    const productDropdownMobile = document.getElementById('productDropdownMobile');
    const arrowIcon = document.getElementById('arrowIcon');
    let isDropdownOpen = false;
    productToggleMobile.addEventListener('click', function (e) {
      e.stopPropagation();
      productDropdownMobile.classList.toggle('hidden');
      isDropdownOpen = !isDropdownOpen;
      arrowIcon.style.transform = isDropdownOpen ? 'rotate(90deg)' : 'rotate(0deg)';
    });
    document.addEventListener('click', function () {
      if (!productDropdownMobile.classList.contains('hidden')) {
        productDropdownMobile.classList.add('hidden');
        isDropdownOpen = false;
        arrowIcon.style.transform = 'rotate(0deg)';
      }
    });
    productDropdownMobile.addEventListener('click', function (e) {
      e.stopPropagation();
    });

    // Active Link Highlight (Desktop + Mobile)
    const path = window.location.pathname;
    const hash = window.location.hash;

    const navMap = {
      "/": "home",
      "/Pages/About.html": "about",
      "/Pages/Careers.html": "careers",
      "/Pages/Contact.html": "contact"
    };

    let activeKey = navMap[path];
    if (path === "/" && hash.includes("Categorie")) {
      activeKey = "services";
    }

    if (activeKey) {
      const desktopLink = document.getElementById(`nav-${activeKey}`);
      const underlineSpan = desktopLink?.querySelector("span");
      if (underlineSpan) {
        underlineSpan.classList.remove("opacity-0");
        underlineSpan.classList.add("opacity-100");
      }

      const mobileLink = document.getElementById(`mobile-nav-${activeKey}`);
      if (mobileLink) {
        mobileLink.classList.add("text-blue-600", "font-semibold");
      }
    }
  });
</script>